<div class="space-y-10">
  <header class="flex flex-col gap-3 rounded-3xl bg-white/70 p-6 shadow-soft dark:bg-surface-800/80">
    <span class="text-xs font-semibold uppercase tracking-[0.4em] text-ink-400 dark:text-slate-400">PreferÃªncias</span>
    <h1 class="text-3xl font-semibold text-ink-900 dark:text-white">ConfiguraÃ§Ãµes pessoais</h1>
    <p class="text-sm text-ink-500 dark:text-slate-300">Organize como as categorias aparecem e gerencie itens ocultos apenas para vocÃª.</p>
  </header>

  <section class="grid gap-6 lg:grid-cols-2">
    <div class="space-y-4 rounded-3xl border border-white/20 bg-white/80 p-5 shadow-soft dark:border-white/10 dark:bg-surface-800/80" data-controller="category-order">
      <div class="flex items-start justify-between">
        <div class="flex flex-col gap-1">
          <h2 class="text-lg font-semibold text-ink-900 dark:text-white">Ordem das categorias</h2>
          <p class="text-xs text-ink-400 dark:text-slate-400">Arraste para reorganizar; as mudanÃ§as sÃ£o salvas automaticamente.</p>
        </div>
      </div>

      <%= form_with url: category_order_settings_path, method: :patch, data: { category_order_target: 'form', turbo_stream: true } do %>
        <%= hidden_field_tag :category_order, '', data: { category_order_target: 'input' } %>

        <ul class="space-y-2" data-category-order-target="list">
          <% @ordered_categories.each do |category| %>
            <li class="flex items-center justify-between gap-3 rounded-2xl border border-ink-200/60 bg-white/60 px-4 py-3 text-sm font-medium text-ink-600 shadow-soft transition hover:border-primary-300 dark:border-white/10 dark:bg-surface-800/60 dark:text-slate-200" data-category-id="<%= category.id %>" draggable="true" data-action="dragstart->category-order#dragStart dragover->category-order#dragOver dragend->category-order#dragEnd">
              <div class="flex items-center gap-3">
                <span class="text-xl"><%= category_icon(category) %></span>
                <span><%= category.name %></span>
              </div>
              <span class="text-xs uppercase tracking-[0.3em] text-ink-300 dark:text-slate-500">â ¿</span>
            </li>
          <% end %>
        </ul>
      <% end %>
    </div>

    <div class="space-y-4 rounded-3xl border border-white/20 bg-white/80 p-5 shadow-soft dark:border-white/10 dark:bg-surface-800/80">
      <div class="flex flex-col gap-1">
        <h2 class="text-lg font-semibold text-ink-900 dark:text-white">Itens ocultos</h2>
        <p class="text-xs text-ink-400 dark:text-slate-400">Itens escondidos da sua visÃ£o principal continuam disponÃ­veis aqui.</p>
      </div>

      <% if @hidden_inventory_items.any? %>
        <ul class="space-y-3">
          <% @hidden_inventory_items.each do |hidden| %>
            <% inventory_item = hidden.inventory_item %>
            <li id="<%= dom_id(hidden) %>" class="flex items-center justify-between gap-3 rounded-2xl border border-ink-200/60 bg-white/60 px-4 py-3 text-sm text-ink-600 shadow-soft transition dark:border-white/10 dark:bg-surface-800/60 dark:text-slate-200">
              <div class="flex flex-col">
                <span class="font-semibold text-ink-900 dark:text-white"><%= inventory_item.item.name %></span>
                <span class="text-xs text-ink-400 dark:text-slate-400">Ocultado em <%= l(hidden.hidden_at, format: :short) %></span>
              </div>
              <%= button_to 'Restaurar', hidden_inventory_item_path(hidden), method: :delete, class: 'inline-flex items-center justify-center rounded-full border border-primary-300 px-4 py-2 text-xs font-semibold text-primary-600 transition hover:bg-primary-50 hover:text-primary-700 dark:border-primary-400/60 dark:text-primary-200 dark:hover:bg-primary-400/20' %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <div class="flex flex-col items-center justify-center gap-2 rounded-2xl border border-dashed border-ink-200/60 bg-white/40 p-6 text-center text-sm text-ink-400 dark:border-white/10 dark:bg-surface-800/40 dark:text-slate-400">
          <span class="text-2xl">ðŸ‘€</span>
          <p>Nenhum item oculto no momento.</p>
        </div>
      <% end %>
    </div>
  </section>
</div>
